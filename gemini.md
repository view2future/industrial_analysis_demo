# Gemini 协作指南：区域产业分析仪表盘

欢迎！本指南旨在帮助你（Gemini）理解本项目的目标、技术栈和工作流程，以确保我们能够高效、高质量地协作，共同将这个项目打造成一个卓越的区域产业分析产品。

## 1. 项目核心目标

我们的目标是构建一个功能强大、数据驱动、用户友好的**区域产业分析仪表盘**。核心功能包括：

-   **数据集成与可视化**：整合多源数据，通过图表（如雷达图、产业链图谱）、地图等形式进行可视化呈现。
-   **智能分析报告**：利用大语言模型（LLM）自动生成深度行业分析报告。
-   **用户交互**：提供报告上传、生成、查看、对比和导出等功能。
-   **系统稳定性与可扩展性**：确保服务稳定可靠，并易于未来功能扩展。

## 2. 核心原则

在所有任务中，请严格遵守以下原则：

1.  **遵循现有规范**：在修改或添加代码前，请先分析项目现有代码的风格、命名、结构和设计模式，并严格遵循。
2.  **质量优先**：代码质量至关重要。所有新功能或修复都必须伴随相应的测试。
3.  **测试驱动**：对于任何后端逻辑的变更（Bug修复、功能新增），都应在 `tests/` 目录下创建或更新对应的测试用例，并确保所有测试通过。
4.  **清晰沟通**：在执行任何有风险或大规模的操作（如修改核心逻辑、部署）之前，请先提出你的计划并征得我的同意。
5.  **代码即文档**：编写清晰、自解释的代码。只在必要时（例如解释复杂算法的“为什么”）添加注释。

## 3. 技术栈

-   **后端**：Python / Flask
-   **前端**：HTML, CSS, JavaScript (存放于 `templates/` 和 `static/`)
-   **数据存储**：文件系统（`data/` 目录下的 JSON 和 Markdown 文件）
-   **测试框架**：Pytest
-   **部署**：Vercel (用于前端/API) 和 Render (可能用于后端服务)

## 4. 开发工作流

请遵循以下步骤来处理开发任务：

1.  **理解任务**：使用 `glob`, `search_file_content`, `read_file` 等工具充分理解相关代码。
2.  **规划方案**：对于复杂任务，向我简要描述你的实现思路或计划。
3.  **编写测试**：在 `tests/` 目录下找到或创建相关的测试文件。优先编写测试用例来复现Bug或验证新功能。
4.  **编码实现**：根据方案和项目规范编写代码。新功能模块应放在 `src/` 下的适当位置。
5.  **运行测试**：执行 `pytest` 命令，确保所有测试都能通过。
6.  **代码审查与提交**：
    -   使用 `git status` 和 `git diff HEAD` 检查你的变更。
    -   向我提议一个清晰、规范的 Commit Message。格式参考：“feat(analysis): 添加SWOT分析功能” 或 “fix(api): 修复报告生成失败的Bug”。
    -   待我确认后，你再执行 `git add` 和 `git commit`。

## 5. 关键目录结构

-   `app.py`: Flask 应用主入口。
-   `api/`: Vercel Serverless Functions 的入口。
-   `src/`: 项目核心逻辑模块。
    -   `src/ai/`: LLM 相关功能。
    -   `src/analysis/`: 核心数据分析逻辑。
    -   `src/export/`: 数据导出功能。
-   `data/`: 存放原始数据、配置文件和输出报告。
-   `templates/`: Flask 使用的 HTML 模板。
-   `static/`: CSS, JavaScript, 图片等静态资源。
-   `tests/`: Pytest 测试用例。
-   `scripts/`: 用于调试、修复或执行特定任务的独立脚本。

## 6. 部署流程

-   **严禁自动部署**：任何部署操作都必须由我明确发起。
-   **部署前检查**：在部署前，必须确保所有测试通过，并且所有变更都已提交。
-   **Vercel 部署**：主要用于前端和轻量级API。通常通过 Git Push 自动触发，但手动部署时请使用 Vercel CLI 命令。
-   **Render 部署**：可能用于后端服务。部署操作将通过 `render.yaml` 配置进行。

请将此文件作为你在本项目中的最高行为准则。期待我们的合作！
